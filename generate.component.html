<div class="container py-5 mt-5 pt-4" style="background: rgba(123, 168, 121, 0.6);">
  <h1 class="text-center section-title mb-4">{{ content.title }}</h1>


    <form class="bg-white p-4 rounded shadow-sm">
      <div class="row g-3">
        <div class="col-md-6">
          <label for="destination" class="form-label">ğŸŒ Destination</label>
          <select class="form-select" id="destination" required [(ngModel)]="selectedCountry" name="selectedCountry">
            <option value="" disabled selected>Select a country</option>
            <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
          </select>

        </div>
        <div class="col-md-3">
          <label for="startDate" class="form-label">ğŸ“… Start Date</label>
          <input type="date" class="form-control" id="startDate" required [(ngModel)]="startDate" name="startDate">
        </div>
        <div class="col-md-3">
          <label for="endDate" class="form-label">ğŸ“… End Date</label>
          <input type="date" class="form-control" id="endDate" required [(ngModel)]="endDate" name="endDate">
        </div>
      </div>

      <div class="mt-4">
        <label for="tripType" class="form-label">âœˆï¸ Trip Type</label>
        <select class="form-select" id="tripType" [(ngModel)]="selectedTripType" name="tripType">
          <option *ngFor="let type of content.types" [value]="type">{{ type }}</option>
        </select>
      </div>

      <div class="mt-4">
        <label class="form-label">ğŸ¯ Activities</label><br>
        <div class="form-check form-check-inline" *ngFor="let activity of content.activities; let i = index">
          <input
            class="form-check-input"
            type="checkbox"
            [id]="'activity' + i"
            [value]="activity"
            [(ngModel)]="selectedActivities[activity]"
            name="activity_{{i}}"
          />

          <label class="form-check-label" [for]="'activity' + i">{{ activity }}</label>
        </div>
      </div>



      <div class="mt-4">
        <label for="weatherToggle" class="form-label">â›… Include Weather Forecast?</label>
        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" id="weatherToggle" [(ngModel)]="includeWeather" name="includeWeather" (change)="onToggleWeather()">
          <label class="form-check-label" for="weatherToggle">Toggle</label>
        </div>
      </div>

      <div class="mt-4">
        <label class="form-label">ğŸ“¦ Packing Preference</label>
        <select class="form-select" id="packingPref" [(ngModel)]="selectedPack" name="packPref">
          <option *ngFor="let pack of content.packs" [value]="pack.toLowerCase()">{{ pack }}</option>
        </select>

      </div>

      <div class="text-center mt-4">
        <button type="button"
          class="btn btn-fun btn-lg"
          data-bs-toggle="modal"
          data-bs-target="#generationModal"
          (click)="generatePackingList()">
          âœ¨ Generate List
        </button>

      </div>
      <div class="modal fade" id="generationModal" tabindex="-1" aria-labelledby="generationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="generationModalLabel">Your Packing List is Ready!</h5>
              <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="alert alert-info">
                Based on your selections, we've generated this customized list. You can edit items before saving.
              </div>
              <div *ngIf="weatherInfo" class="mt-3">
                <h5>ğŸŒ¤ï¸ Weather in {{ selectedCountry }}</h5>
                <p>Temperature: {{ weatherInfo.main.temp }}Â°C</p>
                <p>Condition: {{ weatherInfo.weather[0].description }}</p>
              </div>
              <ul class="list-group packing-list" id="packingList">
                <li *ngFor="let item of packingList" class="list-group-item d-flex justify-content-between align-items-center">
                  {{ item }}
                  <button class="btn btn-sm btn-outline-danger" (click)="removeItem(item)">Remove</button>
                </li>
              </ul>

              <div class="mt-3">
                <label for="addItem" class="form-label">Add custom item:</label>
                <div class="input-group">
                  <input type="text" class="form-control" id="addItem" [(ngModel)]="newItem" name="newItem" placeholder="e.g. Travel adapter">
                  <button class="btn btn-dark-green" (click)="addCustomItem()" [disabled]="!newItem.trim()">Add</button>
                </div>
              </div>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" (click)="closeModal()">Close</button>
              <button type="button" class="btn btn-fun" (click)="saveAndExport()">Save & Export</button>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="alertMessage" class="alert alert-dismissible fade show mt-4" [ngClass]="{
        'alert-success': alertType === 'success',
        'alert-danger': alertType === 'danger',
        'alert-warning': alertType === 'warning'
      }" role="alert">
        {{ alertMessage }}
        <button type="button" class="btn-close" aria-label="Close" (click)="closeAlert()"></button>
      </div>


<div class="row mt-5">
  <div class="col-12">
    <h3 class="mb-3">Packing Checklist</h3>
    <div class="table-responsive">
    <table class="table table-sm table-bordered table-hover align-middle mb-0">
      <thead class="table-dark text-center">
        <tr>
          <th scope="col">Item</th>
          <th scope="col">Packed</th>
        </tr>
      </thead>
      <tbody class="text-center">
        <tr *ngFor="let item of checklistItems">
        <td>{{ item }}</td>
        <td class="text-center">
          <input
            type="checkbox"
            class="form-check-input"
            [(ngModel)]="packedMap[item]"
            [ngModelOptions]="{standalone: true}"
            name="check_{{ item }}"
            (change)="onChecklistChange(item, packedMap[item])">



        </td>
      </tr>

      </tbody>
    </table>
    <div *ngIf="checklistItems.length === 0" class="text-danger">No items loaded.</div>

</div>

    <div class="d-flex justify-content-between mt-3">
      <button class="btn btn-outline-dark-green" (click)="saveChecklistProgress()">Save Checklist</button>
      <button class="btn btn-outline-dark-green">Print Checklist</button>
    </div>
  </div>
</div>
